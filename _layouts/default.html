<!DOCTYPE html>
<html lang="zh-Hans">
{% include head.html %}

<body class="home-template">
    <div class="site-wrapper">
        {% include header.html %}
        <a id="translateLink"><span id="translateLinkText">简</span></a>
        {{ content }}
        {% include footer.html %}
    </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/opencc-js"></script>
<script>
const targetEncodingLS="targetEncoding", translateButtonTextObject=document.getElementById("translateLinkText");

(async ()=>{
    const HTMLConvertHandler=OpenCC.HTMLConverter(await OpenCC.Converter("cn", "tw"), document.documentElement, "zh-Hans", "zh-Hant");
    if(+localStorage.getItem(targetEncodingLS)) {
        translateButtonTextObject.innerHTML="繁";
        HTMLConvertHandler.convert();
    }
    document.getElementById("translateLink").onclick=()=>{
        if(+localStorage.getItem(targetEncodingLS)) {
            translateButtonTextObject.innerHTML="简";
            HTMLConvertHandler.restore();
        } else {
            translateButtonTextObject.innerHTML="繁";
            HTMLConvertHandler.convert();
        }
        localStorage.setItem(targetEncodingLS, +localStorage.getItem(targetEncodingLS)?0:1);
    };
})();
</script>
</html>
